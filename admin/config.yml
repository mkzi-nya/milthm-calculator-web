backend:
  name: github
  repo: mkzi-nya/milthm-calculator-web
  branch: main

publish_mode: editorial_workflow

# ===== 必须存在 =====
media_folder: "static/uploads"
public_folder: "/uploads"

# ✅ 唯一正确的“禁用外部媒体库”方式
local_media_library: true

collections:

  # ===============================
  # Markdown（整个仓库）
  # ===============================
  - name: "markdown"
    label: "Markdown Files"
    folder: ""
    extension: "md"
    format: "raw"
    nested:
      depth: 10
    summary: "{{slug}}"
    fields:
      # ⚠️ 必须存在（哪怕不用）
      - { label: "Title", name: "title", widget: "string", required: false }
      - { label: "Content", name: "body", widget: "markdown" }

  # ===============================
  # JavaScript
  # ===============================
  - name: "javascript"
    label: "JavaScript Files"
    folder: ""
    extension: "js"
    format: "raw"
    nested:
      depth: 10
    summary: "{{slug}}"
    fields:
      - { label: "Title", name: "title", widget: "string", required: false }
      - { label: "Code", name: "body", widget: "code", default_language: javascript }

  # ===============================
  # JSON
  # ===============================
  - name: "json"
    label: "JSON Files"
    folder: ""
    extension: "json"
    format: "raw"
    nested:
      depth: 10
    summary: "{{slug}}"
    fields:
      - { label: "Title", name: "title", widget: "string", required: false }
      - { label: "JSON", name: "body", widget: "code", default_language: json }

  # ===============================
  # YAML
  # ===============================
  - name: "yaml"
    label: "YAML Files"
    folder: ""
    extension: "yml"
    format: "raw"
    nested:
      depth: 10
    summary: "{{slug}}"
    fields:
      - { label: "Title", name: "title", widget: "string", required: false }
      - { label: "YAML", name: "body", widget: "code", default_language: yaml }

  # ===============================
  # TXT
  # ===============================
  - name: "text"
    label: "Text Files"
    folder: ""
    extension: "txt"
    format: "raw"
    nested:
      depth: 10
    summary: "{{slug}}"
    fields:
      - { label: "Title", name: "title", widget: "string", required: false }
      - { label: "Text", name: "body", widget: "text" }
